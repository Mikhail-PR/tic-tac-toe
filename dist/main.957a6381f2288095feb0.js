!function(t){function e(e){for(var r,a,c=e[0],s=e[1],u=e[2],f=0,h=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(l&&l(e);h.length;)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;i.push([121,1]),n()}({121:function(t,e,n){n(122),t.exports=n(309)},308:function(t,e,n){},309:function(t,e,n){"use strict";n.r(e);n(308);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=document.querySelector("#".concat(e)),this.hideStyleClass=n}var e,n,o;return e=t,(n=[{key:"show",value:function(){this.element.classList.remove(this.hideStyleClass)}},{key:"hide",value:function(){this.element.classList.add(this.hideStyleClass)}}])&&r(e.prototype,n),o&&r(e,o),t}();function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t);var e,n,r,o=u(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,"control__block--hide")).menu=t,n.btnSearchShim=n.btnSearch.bind(f(n)),n}return e=i,(n=[{key:"buttonsInit",value:function(){var t=this;this.buttons=[];var e=this.element.querySelectorAll("button");e.forEach((function(e){var n,r,o=(n=e.id,t.menu.itemsPaths.forEach((function(t,e){t.forEach((function(t){t===n&&(r=e)}))})),r);t.buttons.push({element:e,linkedItem:o})}))}},{key:"listen",value:function(t){t?this.element.addEventListener("click",this.btnSearchShim):this.element.removeEventListener("click",this.btnSearchShim)}},{key:"switch",value:function(t){var e=t.linkedItem;this.hide(),e.show()}},{key:"btnSearch",value:function(t){var e=this;this.buttons.forEach((function(n){n.element.contains(t.target)&&e.switch(n)}))}},{key:"show",value:function(){c(h(i.prototype),"show",this).call(this),this.listen(!0)}},{key:"hide",value:function(){c(h(i.prototype),"hide",this).call(this),this.listen(!1)}}])&&a(e.prototype,n),r&&a(e,r),i}(o);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(n,t);var e=b(n);function n(){var t;m(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).listen(!0),t}return n}(y);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_(t);if(e){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(i,t);var e,n,r,o=O(i);function i(t,e,n,r,a,c){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e)).GameClass=n,s.menuWindow=r,s.endGameWindow=a,s.stats=c,s}return e=i,(n=[{key:"play",value:function(t){var e=this.GameClass;this.game=new e(t)}},{key:"replay",value:function(){this.game.restart()}},{key:"exit",value:function(){this.game.destroy()}},{key:"close",value:function(){this.stats.update(),this.hide(),this.menuWindow.show(),this.endGameWindow.show()}}])&&k(e.prototype,n),r&&k(e,r),i}(o);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?x(t):e}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(i,t);var e,n,r,o=A(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).formEl=t.element.querySelector("form"),t.clearInputValueShim=t.clearInputValue.bind(x(t)),t.addInputValueShim=t.addInputValue.bind(x(t)),t.saveDefaultInputsValue(),t}return e=i,(n=[{key:"listen",value:function(t){var e=this;I(D(i.prototype),"listen",this).call(this,t),t?this.inputs.forEach((function(t){t.element.addEventListener("focus",e.clearInputValueShim),t.element.addEventListener("blur",e.addInputValueShim)})):this.inputs.forEach((function(t){t.element.removeEventListener("focus",e.clearInputValueShim),t.element.removeEventListener("blur",e.addInputValueShim)}))}},{key:"switch",value:function(t){if(t.linkedItem instanceof E){var e=!0;this.validate&&(e=this.validate()),e&&(I(D(i.prototype),"switch",this).call(this,t),this.menu.menuWindow.hide(),this.gameInit(t))}else I(D(i.prototype),"switch",this).call(this,t)}},{key:"btnSearch",value:function(t){this.buttons.some((function(e){return e.element.contains(t.target)}))&&t.preventDefault(),I(D(i.prototype),"btnSearch",this).call(this,t)}},{key:"gameInit",value:function(){var t=this.gamePropsInit();this.menu.game.play(t)}},{key:"gamePropsInit",value:function(){var t={playerNames:[]};t.gameMode=this.formEl.getAttribute("name");var e=this.menu.items.find((function(t){return t instanceof E}));return t.gameItem=e,this.inputs.forEach((function(e){"player-name"===e.name&&t.playerNames.push(e.element.value)})),t}},{key:"saveDefaultInputsValue",value:function(){var t=this,e=this.element.querySelectorAll("input[type=text]");this.inputs=[],e.forEach((function(e){t.inputs.push({element:e,defaultValue:e.value,name:e.getAttribute("name")})}))}},{key:"clearInputValue",value:function(t){this.inputs.forEach((function(e){e.element===t.target&&t.target.value===e.defaultValue&&(t.target.value="")}))}},{key:"addInputValue",value:function(t){this.inputs.forEach((function(e){e.element===t.target&&""===t.target.value&&(t.target.value=e.defaultValue)}))}}])&&T(e.prototype,n),r&&T(e,r),i}(y);function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G(t,e,n){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=z(t);if(e){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(i,t);var e,n,r,o=F(i);function i(){V(this,i);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.call.apply(o,[this].concat(e))}return e=i,(n=[{key:"gamePropsInit",value:function(){var t,e=G(z(i.prototype),"gamePropsInit",this).call(this);return e.playerSide=(t="side",document.querySelector('input[name="'+t+'"]:checked').value),e}}])&&N(e.prototype,n),r&&N(e,r),i}(W);function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Z(t);if(e){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(t,e){return!e||"object"!==H(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(i,t);var e,n,r,o=X(i);function i(){var t;$(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).errAlert=t.element.querySelector(".control__form-err-alert"),t}return e=i,(n=[{key:"validate",value:function(){var t=[];this.inputs.forEach((function(e){return t.push(e.element.value)}));var e,n=(e=t).some((function(t){return e.indexOf(t)!==e.lastIndexOf(t)}));return n?this.errAlert.classList.remove("control__form-err-alert--hide"):this.errAlert.classList.add("control__form-err-alert--hide"),!n}}])&&K(e.prototype,n),r&&K(e,r),i}(W);function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,e,n){return(ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=st(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=st(t);if(e){var o=st(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(i,t);var e,n,r,o=at(i);function i(){var t;nt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).winnerAlertEl=t.element.querySelector("#winner-alert"),t}return e=i,(n=[{key:"switch",value:function(t){ot(st(i.prototype),"switch",this).call(this,t),t.linkedItem instanceof g&&this.menu.game.exit()}},{key:"setWinnerMessage",value:function(t){this.winnerAlertEl.textContent=t}},{key:"gameInit",value:function(){this.menu.game.replay()}}])&&rt(e.prototype,n),r&&rt(e,r),i}(W);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mt(t);if(e){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pt(this,n)}}function pt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(n,t);var e=yt(n);function n(){ft(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.call.apply(e,[this].concat(r))}return n}(o);function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kt(t);if(e){var o=kt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return St(this,n)}}function St(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(i,t);var e,n,r,o=gt(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).statsType=n,r.statElements=[],r}return e=i,(n=[{key:"update",value:function(){var t=this;this.clear();var e=JSON.parse(localStorage.getItem("stats"));this.emptyCheck(e[this.statsType])?this.hide():this.show(),e[this.statsType].forEach((function(e){e&&t.insertStat(e)}))}},{key:"insertStat",value:function(t){var e='<th class="stats__table-value">'.concat(t.name,'</th>\n                            <th class="stats__table-value">').concat(t.win,'</th>\n                            <th class="stats__table-value">').concat(t.draw,'</th>\n                            <th class="stats__table-value">').concat(t.lose,"</th>"),n=document.createElement("tr");n.className="stats__table-row",n.innerHTML=e,this.statElements.push(n),this.element.append(n)}},{key:"clear",value:function(){this.statElements.forEach((function(t){t.remove()}))}},{key:"emptyCheck",value:function(t){return 0===Object.keys(t).length}}])&&dt(e.prototype,n),r&&dt(e,r),i}(o);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tt(t);if(e){var o=Tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rt(this,n)}}function Rt(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(i,t);var e,n,r,o=jt(i);function i(){var t;Pt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).singleplayerStats=new Ct("singleplayer-stats-table","stats__table--hide","singleplayer"),t.multiplayerStats=new Ct("multiplayer-stats-table","stats__table--hide","multiplayer"),t}return e=i,(n=[{key:"update",value:function(){JSON.parse(localStorage.getItem("stats"))?(this.singleplayerStats.update(),this.multiplayerStats.update(),this.show()):this.hide()}}])&&_t(e.prototype,n),r&&_t(e,r),i}(o);function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var At=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=document.querySelector("#control"),this.items=[],this.init(e)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.items.push(new g(this,"select-game-mode")),this.items.push(new U(this,"singleplayer-options")),this.items.push(new tt(this,"multiplayer-options"));var e=new ut(this,"end-game-window");this.items.push(e),this.menuWindow=new vt("menu-window","menu-window--hide"),this.items.push(this.menuWindow);var n=new It("stats","stats--hide");this.items.push(n),this.game=new E("tic-tac-toe","tic-tac-toe--hide",t,this.menuWindow,e,n),this.items.push(this.game),this.itemsPathsInit(),this.items.forEach((function(t){t.buttonsInit&&t.buttonsInit()})),n.update()}},{key:"itemsPathsInit",value:function(){var t=this,e={"select-game-mode":["back-btn","exit-btn"],"singleplayer-options":["singleplayer-btn"],"multiplayer-options":["multiplayer-btn"],"tic-tac-toe":["play-btn","play-more-btn"]};this.itemsPaths=new Map;var n=function(e){for(var n=0;n<t.items.length;n++)if(e===t.items[n].element.id)return t.items[n]};for(var r in e){var o=n(r);this.itemsPaths.set(o,e[r])}}}])&&Mt(e.prototype,n),r&&Mt(e,r),t}();function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerEl=e.element,this.element=this.containerEl.querySelector(".tic-tac-toe__board > :nth-child(".concat(n,")")),this.winCombinations=[],this.figure=null}var e,n,r;return e=t,(n=[{key:"draw",value:function(){var t=this.figureStyleClasses.class,e=this.figureStyleClasses.hideClass;this.element.querySelector(".".concat(t)).classList.toggle(e),this.element.classList.toggle("tic-tac-toe__cell--active")}},{key:"clear",value:function(){var t=this.figureStyleClasses.class,e=this.figureStyleClasses.hideClass;this.element.querySelector(".".concat(t)).classList.add(e),this.element.classList.remove("tic-tac-toe__cell--active")}},{key:"destroy",value:function(){this.clear(),this.winCombinations=[],this.figureStyleClasses=null,this.figure=null}}])&&Lt(e.prototype,n),r&&Lt(e,r),t}();var Dt=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cells=[],this.winLineCoords,e&&(this.rank=0)};function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ticTacToe=e,this.element=this.ticTacToe.element.querySelector(".tic-tac-toe__board"),this.rows=[],this.winCombinations=[],this.clickedCellSearchShim=this.clickedCellSearch.bind(this),this.init()}var e,n,r;return e=t,(n=[{key:"init",value:function(){this.cellsInit(),this.winCombinationsInit(),"multiplayer"===this.ticTacToe.gameMode&&this.listen(!0)}},{key:"cellsInit",value:function(){this.cellsCount=0;for(var t=0;t<3;t++){this.rows[t]=new Array(3);for(var e=0;e<3;e++)this.cellsCount++,this.rows[t][e]=new xt(this,this.cellsCount)}}},{key:"winCombinationsInit",value:function(){var t=this;this.winCombinations=[];for(var e="singleplayer"===this.ticTacToe.gameMode,n=function(n){for(var r=new Dt(e),o=0;o<t.rows.length;o++)r.cells.push(t.rows[n][o]);r.winLineCoords=t.winLineCoordsCalculate(n),t.winCombinations.push(r),r.cells.forEach((function(t){return t.winCombinations.push(r)}))},r=0;r<this.rows.length;r++)n(r);for(var o=function(n){for(var r=new Dt(e),o=0;o<t.rows.length;o++)r.cells.push(t.rows[o][n]);r.winLineCoords=t.winLineCoordsCalculate(n,"columns"),t.winCombinations.push(r),r.cells.forEach((function(t){return t.winCombinations.push(r)}))},i=0;i<this.rows.length;i++)o(i);for(var a=new Dt(e),c=0;c<this.rows.length;c++){var s=c;a.cells.push(this.rows[c][s])}a.winLineCoords=this.winLineCoordsCalculate(null,"secondary-diagonal"),a.isDiagonal=!0,this.winCombinations.push(a),a.cells.forEach((function(t){return t.winCombinations.push(a)})),a=new Dt(e);for(var u=0,l=2;l>-1;l--)a.cells.push(this.rows[l][u]),u++;a.winLineCoords=this.winLineCoordsCalculate(null,"main-diagonal"),a.isDiagonal=!0,this.winCombinations.push(a),a.cells.forEach((function(t){return t.winCombinations.push(a)}))}},{key:"listen",value:function(t){t?this.element.addEventListener("click",this.clickedCellSearchShim):this.element.removeEventListener("click",this.clickedCellSearchShim)}},{key:"clickedCellSearch",value:function(t){for(var e,n=0;n<this.rows.length;n++)for(var r=0;r<this.rows.length;r++)if(this.rows[n][r].element.contains(t.target)){e=this.rows[n][r];break}e&&(e.figure||this.ticTacToe.curPlayer.makeMove(e))}},{key:"winLineCoordsCalculate",value:function(t,e){var n=5,r=100-n,o=[16.6,50,83.4][t],i=o;if("columns"===e){var a=[o,n];n=a[0],o=a[1];var c=[i,r];r=c[0],i=c[1]}return"main-diagonal"===e&&(o=r,i=n),"secondary-diagonal"===e&&(o=n,i=r),{x1:n,x2:r,y1:o,y2:i}}},{key:"winCombinationsCheck",value:function(t){var e,n=this;return t.winCombinations.forEach((function(t){n.onlyDuplicatesCheck(t.cells)&&(e=t)})),e}},{key:"onlyDuplicatesCheck",value:function(t){for(var e=t[0].figure,n=0;n<t.length;n++)if(t[n].figure!==e||!t[n].figure)return!1;return!0}},{key:"endGameCheck",value:function(t){var e=this.ticTacToe.curPlayer.enemyPlayer.winCombinations,n=this.winCombinationsFilter(t.winCombinations,e);this.ticTacToe.curPlayer.enemyPlayer.winCombinations=n,"singleplayer"===this.ticTacToe.gameMode&&this.winCombinationsRankUp(t.winCombinations);var r=this.winCombinationsCheck(t),o=!1;return(r||this.ticTacToe.moveCounter===this.cellsCount)&&(this.ticTacToe.gameOver(r),o=!0),o&&this.listen(!1),o}},{key:"winCombinationsRankUp",value:function(t){t.forEach((function(t){return t.rank++}))}},{key:"winCombinationsFilter",value:function(t,e){return e.filter((function(e){return!t.includes(e)}))}},{key:"destroy",value:function(){this.rows.forEach((function(t){t.forEach((function(t){t.figure&&t.destroy()}))}))}}])&&Wt(e.prototype,n),r&&Wt(e,r),t}();function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Nt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.count=0,this.element=e,this.valueEl=this.element.querySelector("[name=value]"),this.valueEl.textContent=this.count,n&&(this.nameEl=this.element.querySelector("[name=name]"),this.nameEl.textContent=n)}var e,n,r;return e=t,(n=[{key:"addPoint",value:function(){this.count++,this.valueEl.textContent=this.count}},{key:"destroy",value:function(){this.count=0}}])&&Vt(e.prototype,n),r&&Vt(e,r),t}();function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jt=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ticTacToe=e,this.board=this.ticTacToe.board,this.name=n,this.side=r,this.figure={figureStyleClasses:{class:this.side,hideClass:"".concat(this.side,"--hide")},drawAnimationTime:1e3},this.isAi=o||!1,this.activeStyle="score__block--active",this.setWinCombinations(i);var a=this.ticTacToe.element.querySelector("[name=".concat(this.side,"]"));this.score=new Nt(a,this.name)}var e,n,r;return e=t,(n=[{key:"setWinCombinations",value:function(t){this.winCombinations=t}},{key:"makeMove",value:function(t){t.figure=this.side,t.figureStyleClasses=this.figure.figureStyleClasses;var e=this.board.endGameCheck(t),n=this.enemyPlayer.figure.drawAnimationTime,r=this.ticTacToe.setDelay(this.drawMove,n,this);this.isAi?1!==this.ticTacToe.moveCounter?r(t,e):this.ticTacToe.setDelay(this.drawMove,500,this)(t,e):this.drawMove(t,e)}},{key:"drawMove",value:function(t,e){t.draw(),e||(this.toggleActiveStyle(),this.ticTacToe.changeMove())}},{key:"toggleActiveStyle",value:function(){this.score.element.classList.toggle(this.activeStyle)}},{key:"removeActiveStyle",value:function(){this.score.element.classList.remove(this.activeStyle)}}])&&Gt(e.prototype,n),r&&Gt(e,r),t}();function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Bt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=e.board,this.player=n,this.methodsWeightsInit()}var e,n,r;return e=t,(n=[{key:"methodsWeightsInit",value:function(){this.moveCalculationMethods=[{method:this.getRandomCell.bind(this),weight:10},{method:this.getBlockEnemyComb.bind(this),weight:40,useEnemyWinComb:!0},{method:this.getCollectSelfComb.bind(this),weight:50,useSelfWinComb:!0},{method:this.preWinMove.bind(this),weight:0,isPreWin:!0}]}},{key:"getRandomMethod",value:function(t){for(var e=t.reduce((function(t,e){return t+e.weight}),0),n=this.generateRandomInteger(1,e),r=0,o=0;o<t.length;o++)if((r+=t[o].weight)>=n)return t[o]}},{key:"generateRandomInteger",value:function(t,e){return Math.floor(t+Math.random()*(e+1-t))}},{key:"methodFind",value:function(t){return this.moveCalculationMethods.find((function(e){return!0===e[t]}))}},{key:"calculationMove",value:function(){var t,e=this.preWinCheck(this.player.winCombinations)||this.preWinCheck(this.player.enemyPlayer.winCombinations);e&&((t=this.methodFind("isPreWin")).weight=200);var n=0===this.player.winCombinations.length;!this.winIsImpossible&&n&&(this.methodFind("useSelfWinComb").weight=0,this.winIsImpossible=!0);var r=0===this.player.enemyPlayer.winCombinations.length;!this.winEnemyIsImpossible&&r&&(this.methodFind("useEnemyWinComb").weight=0,this.winEnemyIsImpossible=!0);var o=this.getRandomMethod(this.moveCalculationMethods).method();this.player.makeMove(o),e&&(t.weight=0)}},{key:"emptyСellsSearch",value:function(){var t=[];return this.board.rows.forEach((function(e){e.forEach((function(e){e.figure||t.push(e)}))})),t}},{key:"getMaxRank",value:function(t){var e=0;return t.forEach((function(t){var n=t.rank;n>e&&(e=n)})),e}},{key:"getRandomMaxRankComb",value:function(t){var e=this.getMaxRank(t),n=t.filter((function(t){return t.rank===e}));return n[this.generateRandomInteger(0,n.length-1)]}},{key:"getRandomCell",value:function(){var t=this.emptyСellsSearch();return t[this.generateRandomInteger(0,t.length-1)]}},{key:"getBlockEnemyComb",value:function(){var t=this.getRandomMaxRankComb(this.player.enemyPlayer.winCombinations);return this.getMoveOnCombination(t)}},{key:"getCollectSelfComb",value:function(){var t=this.getRandomMaxRankComb(this.player.winCombinations);return this.getMoveOnCombination(t)}},{key:"preWinMove",value:function(){return this.preWinCheck(this.player.winCombinations)?this.getCollectSelfComb():this.preWinCheck(this.player.enemyPlayer.winCombinations)?this.getBlockEnemyComb():void 0}},{key:"preWinCheck",value:function(t){return this.getMaxRank(t)===this.board.rows.length-1}},{key:"getMoveOnCombination",value:function(t){var e=t.cells.filter((function(t){return!t.figure}));return e[this.generateRandomInteger(0,e.length-1)]}},{key:"reset",value:function(){this.winIsImpossible=!1,this.winEnemyIsImpossible=!1,this.methodsWeightsInit()}}])&&Ft(e.prototype,n),r&&Ft(e,r),t}();var zt=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.win=0,this.draw=0,this.lose=0};function Ut(t){return function(t){if(Array.isArray(t))return Ht(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ht(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}new At(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameItem=e.gameItem,this.element=document.querySelector("#tic-tac-toe"),this.gameMode=e.gameMode,this.moveCounter=0,this.players=[],this.activeStyle="score__block--active",this.gameOverAlertDelay=2e3,this.winLineAnimationTime=2e3;var n=this.element.querySelector("[name=draw]");this.score=new Nt(n),this.init(e)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){var e=this;this.board=new qt(this),t.playerNames.forEach((function(n,r){if("singleplayer"===e.gameMode){var o="cross"===t.playerSide?"zero":"cross",i=new Jt(e,"AI",o,!0,Ut(e.board.winCombinations)),a=new Jt(e,n,t.playerSide,!1,Ut(e.board.winCombinations));e.players.push(a),e.players.push(i),e.ai=new Bt(e,i)}else e.players.push(new Jt(e,n,0===r?"cross":"zero",!1,Ut(e.board.winCombinations)))})),this.players[0].enemyPlayer=this.players[1],this.players[1].enemyPlayer=this.players[0],this.curPlayer=this.players[0],this.changeMove()}},{key:"winLineInit",value:function(t){var e='<svg class="win-img">\n        <line class="win-img__line" x1="'.concat(t.winLineCoords.x1,'%" y1="').concat(t.winLineCoords.y1,'%" x2="').concat(t.winLineCoords.x2,'%" y2="').concat(t.winLineCoords.y2,'%" stroke="black" stroke-width="40" stroke-linecap="round"></line>\n        </svg>');this.winLineAreaEl=document.createElement("div"),this.winLineAreaEl.className="tic-tac-toe__win-line-area",this.winLineAreaEl.innerHTML=e,this.board.element.append(this.winLineAreaEl);var n=this.winLineAreaEl.querySelector(".win-img"),r=this.curPlayer.figure.drawAnimationTime,o=this.curPlayer.enemyPlayer.figure.drawAnimationTime,i=this.curPlayer.isAi?o+r:r;this.setDelay(this.winLineDraw,i,this)(n,t.isDiagonal)}},{key:"winLineDraw",value:function(t,e){t.classList.add("win-img--draw".concat(!0===e?"-diagonal":""))}},{key:"setDelay",value:function(t,e,n){return function(){var r=arguments;setTimeout((function(){return t.apply(n,r)}),e)}}},{key:"changeMove",value:function(){this.moveCounter++,this.moveCounter%2==0?this.curPlayer=this.curPlayerSearch("zero"):this.curPlayer=this.curPlayerSearch("cross"),this.curPlayer.toggleActiveStyle(),"singleplayer"===this.gameMode&&(this.curPlayer.isAi?(this.board.listen(!1),this.ai.calculationMove()):this.board.listen(!0))}},{key:"curPlayerSearch",value:function(t){var e;return this.players.forEach((function(n){n.side===t&&(e=n)})),e}},{key:"gameOver",value:function(t){var e=this.gameOverAlertDelay+this.winLineAnimationTime;t?(this.winLineInit(t),this.setDelay(this.winAlertShow,e,this)(t),this.curPlayer.score.addPoint(),this.saveStats()):(this.setDelay(this.drawAlertShow,e,this)(),this.curPlayer.toggleActiveStyle(),this.score.element.classList.toggle(this.activeStyle),this.score.addPoint(),this.saveStats(!0))}},{key:"winAlertShow",value:function(){this.gameItem.endGameWindow.setWinnerMessage("".concat(this.curPlayer.name," is winner by playing on the ").concat(this.curPlayer.side," side!")),this.gameItem.close()}},{key:"drawAlertShow",value:function(){this.gameItem.endGameWindow.setWinnerMessage("Draw!"),this.gameItem.close()}},{key:"destroyScoreBoard",value:function(){this.score.destroy(),this.players.forEach((function(t){t.score.destroy()}))}},{key:"destroy",value:function(t){this.board.destroy(),this.winLineAreaEl&&this.winLineAreaEl.remove(),this.score.element.classList.remove(this.activeStyle),this.players.forEach((function(t){return t.removeActiveStyle()})),t||this.destroyScoreBoard()}},{key:"restart",value:function(){var t=this;this.destroy(!0),this.moveCounter=0,this.board.winCombinationsInit(),this.ai&&this.ai.reset(),this.players.forEach((function(e){return e.setWinCombinations(Ut(t.board.winCombinations))})),this.curPlayer=this.players[0],this.changeMove(),"multiplayer"===this.gameMode&&this.board.listen(!0)}},{key:"saveStats",value:function(t){var e=this,n=JSON.parse(localStorage.getItem("stats")),r=this.curPlayer.name,o=this.curPlayer.enemyPlayer.name;if(t)null===n?this.players.forEach((function(t){new zt(t).draw++})):this.players.forEach((function(t){var r=e.playerStatsSearch(t.name,n);r||(r=new zt(t.name),n[e.gameMode].push(r)),r.draw++}));else if(null===n){n=this.createStorage();var i=new zt(r),a=new zt(o);i.win++,a.lose++,n[this.gameMode].push(i),n[this.gameMode].push(a)}else{var c=this.playerStatsSearch(r,n),s=this.playerStatsSearch(o,n);c||(c=new zt(r),n[this.gameMode].push(c)),s||(s=new zt(o),n[this.gameMode].push(s)),c.win++,s.lose++}this.statsSort(n[this.gameMode]),localStorage.setItem("stats",JSON.stringify(n))}},{key:"statsSort",value:function(t){t.sort((function(t,e){return e.win-t.win}))}},{key:"playerStatsSearch",value:function(t,e){var n;for(var r in e[this.gameMode])if(e[this.gameMode][r].name===t){n=e[this.gameMode][r];break}return n}},{key:"createStorage",value:function(){var t={singleplayer:[],multiplayer:[]};return localStorage.setItem("stats",JSON.stringify(t)),t}}])&&$t(e.prototype,n),r&&$t(e,r),t}())}});